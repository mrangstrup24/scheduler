import{u as c}from"./index-3395c5ac.js";import{o as l,c as r,F as b,r as f,a as n,w as E,b as H,d,e as N,v as I,f as D,t as y,g as $,h as g,i as h,j as w}from"./index-2e600749.js";const J={style:{display:"flex","flex-direction":"column",height:"250px","overflow-y":"auto"}},_=["timePoint","index","value","onInput"],L={__name:"TimeTable",props:{timeTable:Object},emits:["update-time-table"],setup(i){const t=i;return(e,s)=>(l(),r("div",J,[(l(!0),r(b,null,f(t.timeTable,(u,a)=>(l(),r("input",{type:"text",timePoint:u,index:a,key:u.id,value:u.timePoint,onInput:p=>e.$emit("update-time-table",p.target.value,a)},null,40,_))),128)),n("input",{type:"text",onKeydown:s[0]||(s[0]=E(u=>{e.$emit("update-time-table",u.target.value,t.timeTable.length),u.target.value=""},["enter"]))},null,32)]))}},V=n("label",{for:"input"},"Class Input",-1),j=n("br",null,null,-1),B=n("br",null,null,-1),M={key:0,class:"err-msg"},U={__name:"ClassCreator",emits:["create-class"],setup(i,{emit:t}){const e=H({class:"",invalid:null,errMsg:""}),s=()=>{if(e.invalid=null,e.class!==""){t("create-class",e.class),e.class="";return}e.invalid=!0,e.errMsg="Value cannot be empty"};return(u,a)=>(l(),r("div",null,[V,d(),j,N(n("input",{id:"input",type:"text","onUpdate:modelValue":a[0]||(a[0]=p=>e.class=p)},null,512),[[I,e.class]]),n("button",{onClick:a[1]||(a[1]=p=>s())},[D(u.$slots,"default",{},()=>[d("Create")])]),d(),B,e.invalid?(l(),r("p",M,y(e.errMsg),1)):$("",!0)]))}},F={style:{width:"500px",height:"auto",border:"1px solid black",margin:"5px",padding:"5px"}},G=["value"],q={key:1},K=n("br",null,null,-1),P={key:4},W=n("label",{for:"input1"},"Grade: ",-1),z=["value"],A=n("br",null,null,-1),Q={__name:"ClassItem",props:{homeroom:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["edit-homeroom","update-homeroom","update-homeroom-grade","delete-homeroom","option-homeroom"],setup(i){return(t,e)=>(l(),r("div",F,[i.homeroom.isEditing?(l(),r("input",{key:0,type:"text",value:i.homeroom.homeroom,onInput:e[0]||(e[0]=s=>t.$emit("update-homeroom",s.target.value,i.index))},null,40,G)):(l(),r("span",q,y(i.homeroom.homeroom),1)),d(),K,n("div",null,[i.homeroom.isEditing?(l(),r("button",{key:0,onClick:e[1]||(e[1]=s=>t.$emit("edit-homeroom",i.index))},"Done")):(l(),r("button",{key:1,onClick:e[2]||(e[2]=s=>t.$emit("edit-homeroom",i.index))},"Edit")),i.homeroom.isOptioning?(l(),r("button",{key:2,onClick:e[3]||(e[3]=s=>t.$emit("option-homeroom",i.index))},"Done")):(l(),r("button",{key:3,onClick:e[4]||(e[4]=s=>t.$emit("option-homeroom",i.index))},"Options")),n("button",{onClick:e[5]||(e[5]=s=>t.$emit("delete-homeroom",i.homeroom.id))},"Delete"),i.homeroom.isOptioning?(l(),r("div",P,[W,n("input",{type:"number",id:"input1",value:i.homeroom.options.grade,onInput:e[6]||(e[6]=s=>t.$emit("update-homeroom-grade",s.target.value,i.index))},null,40,z),d(),A])):$("",!0)])]))}},R=n("h1",null,"Classes",-1),X=n("h1",null,"Time Table",-1),Y=n("p",null,[d(" Please format the input fields as so: "),n("br"),d(" {First 3 Letters of Weekday} {Starting Time}-{End Time} "),n("br"),d(" Example: "),n("br"),d(' "Thu 8:00-8:40"')],-1),te={__name:"Classes",setup(i){const t=g([]),e=g([]),s=o=>{t.value.push({id:c(),homeroom:o,isEditing:null,isOptioning:null,options:{grade:null,subjectCount:{}}}),a()};(()=>{const o=JSON.parse(localStorage.getItem("homerooms")),m=JSON.parse(localStorage.getItem("timetable"));o&&(t.value=o),m&&(e.value=m)})();const a=()=>{localStorage.setItem("homerooms",JSON.stringify(t.value)),$cookies.set("homerooms",JSON.stringify(t.value)),localStorage.setItem("timetable",JSON.stringify(e.value)),$cookies.set("timetable",JSON.stringify(e.value))},p=o=>{t.value[o].isEditing=!t.value[o].isEditing,a()},k=o=>{t.value[o].isOptioning=!t.value[o].isOptioning,a()},T=(o,m)=>{t.value[m].homeroom=o,a()},x=o=>{t.value=t.value.filter(m=>m.id!==o),a()},C=(o,m)=>{t.value[m].options.grade=o,a()},O=(o,m)=>{e.value[m]==null?e.value.push({id:c(),timePoint:o}):e.value[m].timePoint=o,e.value.forEach(v=>{v.timePoint==""&&e.value.splice(e.value.indexOf(v),1)}),a()};return(o,m)=>(l(),r("main",null,[R,h(U,{onCreateClass:s}),n("ul",null,[(l(!0),r(b,null,f(t.value.slice().reverse(),(v,S)=>(l(),w(Q,{homeroom:v,index:t.value.length-1-S,key:v.id,onEditHomeroom:p,onUpdateHomeroom:T,onDeleteHomeroom:x,onOptionHomeroom:k,onUpdateHomeroomGrade:C},null,8,["homeroom","index"]))),128))]),X,Y,h(L,{timeTable:e.value,onUpdateTimeTable:O},null,8,["timeTable"])]))}};export{te as default};
